---
layout:     post
title:      "A Morgan Stanley Interview Recap | 一篇大摩面经"
date:       2016-04-23
author:     "William"
header-img: "img/ms-intern-interview.jpg"
excerpt_separator: <!--more-->
tags:
    - 面试
    - 算法
    - 暑假
---

**请勿转载。**

*尽管我认为本人并没有在微博等网站上公开传播（如HR要求的那样），但如果你来自摩根斯坦利且认为这篇文章不符合保密规范，请联系我(willx8@gmail.com)更改或撤下。*

---

## 4-24

接到了HR的电话告诉我过了，10周包住的实习。好像软院的暑假大作业不出国就必须要呆在学校里……？所以答应了NUS的暑期科研实习只能拒掉了这个offer……

感觉MS还不错呀，明年有机会的话接着申吧……

---

## 4-15

我3月网上直接申的，不过听说参加学校的实习宣讲会可以有个面试（笔试？）机会，过了就可以直接进最终轮。流程是网申-网上测试-电话面试。一个礼拜前接到Assessment Center的邮件，告诉我电面过了。面试在浦东嘉里城，从闵大荒出发要换4部地铁。

# 笔试

到了那边。先发了张卷子，两道题30分钟手写代码，两道算法题。

## 算法题1：

一个公司架构，母公司可以有若干子公司，子公司也可以由若干母公司，每个公司都有直接雇佣的人数，设计算法求算每个公司包括其子公司在内的人数。

如
      A
     / \
    B   C
     \ /
      D

B,C是A的子公司，是D的母公司。人数分别为A:40, B:200, C:100, D:80
则算法结果应是 A:420, B:280, C:180, D:80

一开始我掉进语言里写得很慢……最后发现只有十分钟了写了一行伪代码表示了很复杂的东西。。获得的经验就是**写代码的时候就不要太注意code style和variable naming了吧……？**

## 算法题2：

判断一个**string**是否是*回文（Palindrome）*？linked list of `char`呢？

----

# 第一轮面试

第一轮面试就是问了上面两个算法。听说别人还问了一些项目经验，而我……由于上来就和面试官说大二除了大作业没什么项目经验他就与我深入讨论算法了……

上面两个算法是第一个小哥问的，小哥很友好，见面还问我怎么没穿西装，然后说也不是必须啦blabla……走了还问我大二学校同意你们出来实习吗……（好吧其实应该不同意……捂脸）

## 改进回文算法

`string`版本就是简单的递归啦。

对linked list一开始给了个两个指针同时向中间靠拢的办法。然后……被提醒list是**单向**的。以及，不知道这个list的长度。

给他说了一个一边遍历一边把箭头反转指向的算法，然后让写下来，给他解释完他说挺creative的。

最后问了他还能怎么改进，他说的trick是*fast and slow pointer*，i.e.快的步长2，慢的步长1，快的到`'\0'`时慢的刚好到中间（因为我用了遍历一边数长度的方法）。顺便夸了反转箭头这个idea...

## 子公司人数算法

用了个DAG上的拓扑排序，然后用`std::set`记录所有子公司的方法。讲了半天终于把算法说通了，后来问小哥才发现拓扑排序其实可以自然地用递归调用蕴含……所以他才对拓扑排序毫无准备吧……

---

# 第二轮面试

第一个小哥走了之后进来了两个人，一个人看起来比较像网上说的不是大陆人的boss（仿佛是native English speaker），另一个是问我技术的小哥。先是自我介绍，听说我大二，以及我说了没做什么大项目之后还是问了我一大堆算法……

## 算法题……3

Boss问的：
从1~100中选出99个整数成为一个`array`，找到缺少的那个数。

### v1

sort and binary search. 

**Q:** Time? 

**A:** O(nlogn)

**Q**：有没有O(n)的算法？

### v2

**A**：全部加起来求和，用5050减掉这个和

**Q**：这个算法是否有缺陷？

没答出。提醒我以后发现是overflow问题。

**Q**：如果只能用`char`(1byte)表示整数呢？

我还在想的时候小哥说已经差不多了，直接move on到下一题了。后来我问他他说是XOR的bit trick

# 下一题

判断两个词所用字母是否相同，想了一会儿被告知不要想太多……
所以就答了用26个bool判断每个字母出现与否。

怎么优化？答bit trick，可以从26bytes的空间复杂度降到26bits


## 其他

还被问了FUNCTION-LIKE MACRO的坏处 答了一堆：compiler看不见难debug，要括号，传++a会加两次etc

Q: 怎么改进？

B: `inline function`

Q: `inline function`永远是`inline`的吗？

A: 不是，看编译器

Q: 编译器 `-O2` `-O3`优化的区别？说不清楚然后猜了一堆，被告知有关于`inline function`的优化

Q: 除了`#define`还有哪些preprocessor？

A: `#include`

Q: 那`#include`怎么保证相同头文件不被`#include`两次？

A: `#ifndef`

接着开始问我继承和虚函数，比如`B:A`，`B`的`virtual function`和`A`的有什么区别，在内存中怎么表示。一个Pointer怎么知道自己指向的是`B`还是`A`，内存中有没有存？`vtable`怎么区分两个`virtual function`……我算是乱答了一气吧

## 反问

最后结尾还是反问吧……我就问了第一道题怎么解，就有了上面的回答。他们还问了还有没有在申别的实习，我说了在申NUS的暑期科研实习，然后技术小哥建议先来工业界实习……没了

